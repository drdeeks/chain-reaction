# =============================================================================
# Chain Reaction - Environment Configuration
# =============================================================================
# 
# This file contains all environment variables needed to run Chain Reaction.
# Copy this file to .env and fill in the values for your environment.
#
# Quick Start:
#   1. Copy this file: cp .env.example .env
#   2. Fill in the required variables (see below)
#   3. Run: npm install
#   4. Run: npm run db:push (if using database)
#   5. Run: npm run dev
#
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
#
# Examples:
#   - Local: postgresql://postgres:password@localhost:5432/chain_reaction
#   - Supabase: postgresql://user:pass@db.xxxxx.supabase.co:5432/postgres
#   - Neon: postgresql://user:pass@ep-xxxxx.us-east-2.aws.neon.tech/neondb
#   - Railway: postgresql://postgres:pass@containers-us-west-xxx.railway.app:5432/railway
#
# NOTE: If not set, the app will run in MOCK mode with in-memory storage.
#       This is fine for development but data won't persist between restarts.
#       For production, you MUST set this variable.
#
DATABASE_URL=

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
# Port number for the server to listen on
# Default: 5000
# 
# Note: In some hosting environments (like Replit), only specific ports are
#       allowed. Check your hosting provider's documentation.
#
PORT=5000

# -----------------------------------------------------------------------------
# NODE ENVIRONMENT
# -----------------------------------------------------------------------------
# Set to "production" for production builds, "development" for local dev
# Default: development (when running npm run dev)
#
# This affects:
#   - Error handling and logging
#   - Static file serving (production uses pre-built files)
#   - Vite dev server (only in development)
#
NODE_ENV=development

# -----------------------------------------------------------------------------
# BASE URL (Optional)
# -----------------------------------------------------------------------------
# Base URL for generating share links
# If not set, will use the request host header (req.get('host'))
#
# Examples:
#   - Local dev: http://localhost:5000
#   - Production: https://chain-reaction-silk.vercel.app
#
# NOTE: For production, it's recommended to set this to prevent host header
#       spoofing attacks (see Bug Fix #23 in CHANGELOG.md)
#
BASE_URL=

# =============================================================================
# QUICK START WALKTHROUGH
# =============================================================================
#
# STEP 1: Install Dependencies
#   $ npm install
#
# STEP 2: Set Up Environment Variables
#   $ cp .env.example .env
#   $ nano .env  # or use your preferred editor
#
# STEP 3A: Development Without Database (Easiest)
#   - Leave DATABASE_URL empty in .env
#   - The app will use in-memory mock storage
#   - Data won't persist, but you can start coding immediately
#   - Run: npm run dev
#
# STEP 3B: Development With Database (Recommended for Full Testing)
#   - Set up a PostgreSQL database (local or cloud)
#   - Add DATABASE_URL to .env (see examples above)
#   - Run: npm run db:push  # Creates tables
#   - Run: npm run dev
#
# STEP 4: Access the Application
#   - Open your browser to: http://localhost:5000
#   - The app should load with 8 pre-seeded puzzles
#
# STEP 5: Production Deployment
#   - Set NODE_ENV=production
#   - Set DATABASE_URL to your production database
#   - Set BASE_URL to your production domain
#   - Run: npm run build
#   - Run: npm start
#
# =============================================================================
# DATABASE SETUP OPTIONS
# =============================================================================
#
# Option 1: Local PostgreSQL
#   1. Install PostgreSQL: https://www.postgresql.org/download/
#   2. Create database: createdb chain_reaction
#   3. Set DATABASE_URL=postgresql://postgres:password@localhost:5432/chain_reaction
#   4. Run: npm run db:push
#
# Option 2: Supabase (Free Tier Available)
#   1. Sign up at https://supabase.com
#   2. Create a new project
#   3. Go to Settings > Database
#   4. Copy the connection string (URI format)
#   5. Set DATABASE_URL in .env
#   6. Run: npm run db:push
#
# Option 3: Neon (Free Tier Available)
#   1. Sign up at https://neon.tech
#   2. Create a new project
#   3. Copy the connection string from dashboard
#   4. Set DATABASE_URL in .env
#   5. Run: npm run db:push
#
# Option 4: Railway (Free Tier Available)
#   1. Sign up at https://railway.app
#   2. Create new project > Add PostgreSQL
#   3. Copy connection string from Variables tab
#   4. Set DATABASE_URL in .env
#   5. Run: npm run db:push
#
# Option 5: Docker (Local Development)
#   1. Run: docker run --name chain-reaction-db -e POSTGRES_PASSWORD=password \
#          -e POSTGRES_DB=chain_reaction -p 5432:5432 -d postgres:15
#   2. Set DATABASE_URL=postgresql://postgres:password@localhost:5432/chain_reaction
#   3. Run: npm run db:push
#
# =============================================================================
# TROUBLESHOOTING
# =============================================================================
#
# Issue: "DATABASE_URL must be set" error
#   Solution: Either set DATABASE_URL in .env, or leave it empty to use
#             mock storage (data won't persist)
#
# Issue: "Connection refused" when connecting to database
#   Solution: 
#     - Check that PostgreSQL is running
#     - Verify DATABASE_URL format is correct
#     - Check firewall/network settings
#     - For cloud databases, ensure IP is whitelisted
#
# Issue: "Port 5000 already in use"
#   Solution: Set PORT to a different value in .env (e.g., PORT=3000)
#
# Issue: App shows "Running in MOCK mode" warning
#   Solution: This is normal if DATABASE_URL is not set. Set it to use
#             a real database for persistent storage.
#
# Issue: "Table does not exist" error
#   Solution: Run `npm run db:push` to create database tables
#
# Issue: Share links use wrong URL
#   Solution: Set BASE_URL in .env to your production domain
#
# =============================================================================
# SECURITY NOTES
# =============================================================================
#
# - Never commit .env file to version control (it's in .gitignore)
# - Use strong passwords for production databases
# - Enable SSL for production database connections
# - Set BASE_URL in production to prevent host header spoofing
# - Use environment-specific .env files (.env.development, .env.production)
#
# =============================================================================
